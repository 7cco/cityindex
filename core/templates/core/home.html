{% extends "base.html" %}

{% block title %}–ì–æ—Ä–æ–¥–ò–Ω–¥–µ–∫—Å ‚Äî –û—Ü–µ–Ω–∫–∞ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω–æ–≥–æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–∞ –º–∞–ª—ã—Ö –≥–æ—Ä–æ–¥–æ–≤{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="text-center mb-5">
        <h1 class="display-4 fw-bold">üèôÔ∏è –ì–æ—Ä–æ–¥–ò–Ω–¥–µ–∫—Å</h1>
        <p class="lead text-muted">
            –°–µ—Ä–≤–∏—Å –æ—Ü–µ–Ω–∫–∏ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω–æ–≥–æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–∞ –º–∞–ª—ã—Ö –≥–æ—Ä–æ–¥–æ–≤ –†–§<br>
            –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –¥–∞–Ω–Ω—ã—Ö –†–æ—Å—Å—Ç–∞—Ç–∞, –§–ù–° –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
        </p>
    </div>

    <div class="row text-center mb-5">
        <div class="col-md-4">
            <div class="p-3 bg-light rounded">
                <h2 class="display-6">{{ cities_count }}</h2>
                <p class="text-muted">–ì–æ—Ä–æ–¥–æ–≤ –≤ –±–∞–∑–µ</p>
            </div>
        </div>
        <div class="col-md-4">
            <div class="p-3 bg-light rounded">
                <h2 class="display-6">{{ regions_count }}</h2>
                <p class="text-muted">–†–µ–≥–∏–æ–Ω–æ–≤</p>
            </div>
        </div>
        <div class="col-md-4">
            <div class="p-3 bg-light rounded">
                <h2 class="display-6">{{ avg_index|floatformat:2 }}</h2>
                <p class="text-muted">–°—Ä–µ–¥–Ω–∏–π –∏–Ω–¥–µ–∫—Å</p>
            </div>
        </div>
    </div>

    <div class="card mb-5">
        <div class="card-header bg-primary text-white">
            <h5 class="mb-0">–¢–û–ü-5 –≥–æ—Ä–æ–¥–æ–≤ –ø–æ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω–æ–º—É –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—É</h5>
        </div>
        <div class="card-body">
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>–ú–µ—Å—Ç–æ</th>
                        <th>–ì–æ—Ä–æ–¥</th>
                        <th>–†–µ–≥–∏–æ–Ω</th>
                        <th>–ò–Ω–¥–µ–∫—Å</th>
                    </tr>
                </thead>
                <tbody>
                    {% for city, index in top_cities_with_index %}
                    <tr class="
                        {% if index >= 0.7 %}table-success
                        {% elif index >= 0.4 %}table-warning
                        {% else %}table-danger{% endif %}">
                        <td><strong>{{ forloop.counter }}</strong></td>
                        <td>{{ city.city }}</td>
                        <td>{{ city.region }}</td>
                        <td class="fw-bold">{{ index|floatformat:2 }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <div class="card mb-5">
        <div class="card-header bg-light">
            <h5 class="mb-0">üîç –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Å–µ—Ä–≤–∏—Å–æ–º</h5>
        </div>
        <div class="card-body">
            <ol>
                <li>–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–≥–∏–æ–Ω –≤ —Ñ–∏–ª—å—Ç—Ä–∞—Ö –∏–ª–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –≤—Å–µ –≥–æ—Ä–æ–¥–∞</li>
                <li>–û—Ü–µ–Ω–∏—Ç–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω—ã–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª –ø–æ —Ü–≤–µ—Ç–æ–≤–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–∏:
                    <span class="badge bg-success">–í—ã—Å–æ–∫–∏–π</span>
                    <span class="badge bg-warning text-dark">–°—Ä–µ–¥–Ω–∏–π</span>
                    <span class="badge bg-danger">–ù–∏–∑–∫–∏–π</span>
                </li>
                <li>–°—Ä–∞–≤–Ω–∏—Ç–µ –¥–æ 10 –≥–æ—Ä–æ–¥–æ–≤ (—Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è) –∏–ª–∏ –¥–æ 3 ‚Äî –±–µ–∑ –Ω–µ—ë</li>
                <li>–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤ CSV –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –∞–Ω–∞–ª–∏–∑–∞</li>
            </ol>
        </div>
    </div>

    <div class="d-grid gap-2 d-md-flex justify-content-md-center">
        <a href="{% url 'main' %}" class="btn btn-primary btn-lg px-4 me-md-2">
            üìä –ü–µ—Ä–µ–π—Ç–∏ –∫ –∞–Ω–∞–ª–∏–∑—É
        </a>
    </div>
</div>
{% endblock %}